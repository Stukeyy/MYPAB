(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a27c247c"],{"6cc7":function(e,t,n){},a3ef:function(e,t,n){"use strict";n("6cc7")},dfe53:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container"}},[n("el-row",{attrs:{gutter:32}},[n("el-col",{attrs:{xs:24,sm:24,lg:12}},[n("h1",[e._v("Timetable")])]),n("el-col",{attrs:{xs:24,sm:24,lg:12}},[n("el-button",{class:e.balanceBtnClass,attrs:{type:"success",disabled:e.currentlyBalancing},on:{click:e.balancer}},[e._v(" "+e._s(e.balanceBtnText)+" "),e.currentlyBalancing?n("i",{staticClass:"el-icon-loading"}):e._e()])],1)],1),n("br"),n("br"),n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEvents,expression:"loadingEvents"}],attrs:{gutter:20}},[n("Calendar",{attrs:{events:e.events},on:{updateEventTime:e.updateEventTime,updateTaskTime:e.updateTaskTime,confirmSuggestion:e.confirmSuggestion}})],1),n("br"),n("br")],1)},s=[],i=(n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("FullCalendar",{attrs:{options:e.calendarOptions}})],1)}),c=[],o=(n("5574"),n("f5ff")),l=n("3cdd"),r=n("3e32"),u=n("a20c"),d={name:"Calendar",components:{FullCalendar:o["a"]},props:{events:{type:Array,default:function(){return[]}}},data:function(){return{calendarOptions:{plugins:[l["b"],r["a"],u["a"]],initialView:"timeGridWeek",views:{dayGridMonth:{dayHeaderFormat:{weekday:"long"}}},headerToolbar:{start:"dayGridMonth timeGridWeek timeGridDay",center:"title",end:"prev next"},footerToolbar:{start:"prev",center:"",end:"next"},titleFormat:{year:"numeric",month:"long",day:"numeric"},dayHeaderFormat:{weekday:"long",day:"numeric"},allDaySlot:!0,nowIndicator:!0,firstDay:1,events:this.events,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},eventClick:this.viewEvent,editable:!0,snapDuration:"00:15:00",eventDrop:this.updateEventTime,eventResize:this.updateEventTime}}},watch:{events:function(){this.calendarOptions.events=this.events}},methods:{viewEvent:function(e){console.log(e);var t=e.event.extendedProps.suggested,n=e.event.extendedProps.type;t?this.$emit("confirmSuggestion",e):"event"===n?this.$router.push("/events/view?eventID="+e.event.id):"task"===n&&this.$router.push("/tasks/view?taskID="+e.event.id)},updateEventTime:function(e){console.log(e);var t=e.event.extendedProps.type,n=e.event.allDay,a=e.event.start,s=e.event.end;n?"task"===t?this.$emit("updateTaskTime",e):"event"===t&&this.$emit("updateEventTime",e):"task"===t?null!==s?a.getDate()===s.getDate()?this.$emit("updateTaskTime",e):(e.revert(),this.$message.error("Task cannot span multiple days")):this.$emit("updateTaskTime",e):"event"===t&&(null!==s?a.getDate()===s.getDate()?this.$emit("updateEventTime",e):(e.revert(),this.$message.error("Event cannot span multiple days")):this.$message.warning("Please Select an End Time for the Event"))}}},g=d,v=n("2877"),h=Object(v["a"])(g,i,c,!1,null,null,null),m=h.exports,f=n("ebd1"),p={name:"Timetable",components:{Calendar:m},data:function(){return{type:"timetable",loadingEvents:!0,events:[],status:"start",balanceBtnClass:"balanceBtn",balanceBtnText:"Balance",currentlyBalancing:!1}},computed:{},watch:{},created:function(){this.balancerRunning()},methods:{balancerRunning:function(){var e=this;Object(f["h"])().then((function(t){e.$message.success(t.data),console.log(t)})).catch((function(t){e.$message.warning(t.response.data),e.balanceBtnClass="inProgressBtn",e.balanceBtnText="Confirm Suggestions",e.currentlyBalancing=!1,e.status="finish",console.log(t)})).finally((function(){e.getEvents()}))},getEvents:function(){var e=this;Object(f["x"])(this.type).then((function(t){console.log(t),e.events=t.data,e.loadingEvents=!1})).catch((function(t){console.log(t),e.$message.error("Failed Getting Events"),e.loadingEvents=!1}))},updateEventTime:function(e){var t=this;console.log(e.event);var n=e.event.id,a=e.event.startStr,s=e.event.endStr,i=e.event.allDay;Object(f["R"])(n,a,s,i).then((function(e){t.$message.success("Event Updated Successfully")})).catch((function(e){console.log(e),t.$message.error("Error Updating Event")}))},updateTaskTime:function(e){var t=this;console.log(e.event);var n=e.event.id,a=e.event.startStr,s=e.event.endStr,i=e.event.allDay;Object(f["V"])(n,a,s,i).then((function(e){t.$message.success("Task Updated Successfully")})).catch((function(e){console.log(e),t.$message.error("Error Updating Task")}))},balancer:function(){"start"===this.status?this.startBalancer():"finish"===this.status&&this.finishBalancer()},startBalancer:function(){var e=this;this.loadingEvents=!0,this.balanceBtnClass="currentlyBalancingBtn",this.balanceBtnText="Balancing",this.currentlyBalancing=!0,Object(f["M"])().then((function(t){e.$message.success(t.data),e.balanceBtnClass="inProgressBtn",e.balanceBtnText="Confirm Suggestions",e.currentlyBalancing=!1,e.status="finish",e.getEvents(),console.log(t)})).catch((function(t){e.$message.warning(t.response.data),e.loadingEvents=!1,console.log(t)}))},confirmSuggestion:function(e){var t=this;this.loadingEvents=!0,console.log(e),Object(f["g"])(e.event.id).then((function(e){console.log(e),t.$message.success(e.data),t.getEvents()})).catch((function(e){console.log(e),t.getEvents()})).finally((function(){t.loadingEvents=!1}))},finishBalancer:function(){var e=this;this.loadingEvents=!0,this.balanceBtnClass="confirmingProgressBtn",this.balanceBtnText="Confirming",this.currentlyBalancing=!0,Object(f["o"])().then((function(t){e.$message.success(t.data),e.balanceBtnClass="balanceBtn",e.balanceBtnText="Balance",e.currentlyBalancing=!1,e.status="start",e.getEvents(),console.log(t)})).catch((function(t){e.$message.warning(t.response.data),e.loadingEvents=!1,console.log(t)}))}}},b=p,y=(n("a3ef"),Object(v["a"])(b,a,s,!1,null,"1375014e",null));t["default"]=y.exports}}]);