(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d7e8b9b"],{"2d84":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"container"}},[s("el-row",{attrs:{gutter:32}},[s("el-col",{attrs:{xs:24,sm:24,lg:12}},[s("h1",[t._v("Update Task")])]),s("el-col",{attrs:{xs:24,sm:24,lg:12}})],1),s("br"),s("br"),s("el-row",{attrs:{gutter:32}},[s("UpdateTaskForm",{attrs:{tags:t.tags,"task-form":t.taskForm},on:{formComplete:t.updateTask}})],1),s("br"),s("br")],1)},r=[],i=s("ebd1"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"updateTaskFormContainer"}},[s("el-row",{attrs:{gutter:32}},[s("el-form",{ref:"taskForm",attrs:{model:t.taskForm,rules:t.taskRules}},[s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("el-form-item",{attrs:{label:"Task",prop:"task"}},[s("el-input",{attrs:{placeholder:"name"},model:{value:t.taskForm.task,callback:function(e){t.$set(t.taskForm,"task",e)},expression:"taskForm.task"}})],1)],1),s("br"),s("br"),s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("el-form-item",{attrs:{label:"Tag",prop:"tag_id"}},[s("br"),s("el-select",{staticClass:"tagSelector",attrs:{placeholder:"tag"},model:{value:t.taskForm.tag_id,callback:function(e){t.$set(t.taskForm,"tag_id",e)},expression:"taskForm.tag_id"}},t._l(t.tags,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),s("br"),s("br"),s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("el-form-item",{attrs:{label:"Priority",prop:"priority"}},[s("br"),s("el-select",{staticClass:"prioritySelector",attrs:{placeholder:"priority"},model:{value:t.taskForm.priority,callback:function(e){t.$set(t.taskForm,"priority",e)},expression:"taskForm.priority"}},[s("el-option",{attrs:{label:"Low",value:"low"}}),s("el-option",{attrs:{label:"Medium",value:"medium"}}),s("el-option",{attrs:{label:"High",value:"high"}})],1)],1)],1),s("br"),s("br"),t.showDate?s("div",[s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("el-form-item",{attrs:{label:"Date",prop:"start_date_object"}},[s("br"),s("el-date-picker",{staticClass:"dateSelector",attrs:{placeholder:"01/01/2020",format:"dd/MM/yyyy","picker-options":t.startDatePickerOptions,clearable:!0},on:{change:function(e){t.disableTimeBtn=!1}},model:{value:t.taskForm.start_date_object,callback:function(e){t.$set(t.taskForm,"start_date_object",e)},expression:"taskForm.start_date_object"}})],1)],1)],1):t._e(),t.showTime?s("div",[s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("el-form-item",{attrs:{label:"Start Time",prop:"start_time"}},[s("br"),s("el-time-select",{staticClass:"timeSelector",attrs:{placeholder:"09:00","picker-options":t.startTimePickerOptions,"default-value":t.defaultStartTime,format:"HH:mm","value-format":"HH:mm",clearable:!0},on:{change:t.updateEndTimeOptions},model:{value:t.taskForm.start_time,callback:function(e){t.$set(t.taskForm,"start_time",e)},expression:"taskForm.start_time"}})],1)],1),s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("el-form-item",{attrs:{label:"End Time",prop:"end_time"}},[s("br"),s("el-time-select",{staticClass:"timeSelector",attrs:{placeholder:"17:00 (optional)","picker-options":t.endTimePickerOptions,format:"HH:mm","value-format":"HH:mm",clearable:!0},on:{change:t.updateStartTimeOptions},model:{value:t.taskForm.end_time,callback:function(e){t.$set(t.taskForm,"end_time",e)},expression:"taskForm.end_time"}})],1)],1)],1):t._e(),s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("el-form-item",{attrs:{label:"Notes",prop:"notes"}},[s("br"),s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"Task Notes"},model:{value:t.taskForm.notes,callback:function(e){t.$set(t.taskForm,"notes",e)},expression:"taskForm.notes"}})],1)],1),s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("h4",{attrs:{id:"checklistLabel"}},[t._v(" Checklist: ")]),s("Checklist",{attrs:{checklist:t.taskForm.checklist},on:{"add-checklist":function(e){t.taskForm.checklist=e}}})],1),s("el-col",{attrs:{xs:24,sm:24,lg:24}},[s("el-form-item",[s("br"),s("el-button",{staticClass:"dateBtn",attrs:{type:"primary"},on:{click:function(e){return t.showDateForm()}}},[t._v("Date")]),s("el-button",{staticClass:"timeBtn",attrs:{disabled:t.disableTimeBtn,type:"primary"},on:{click:function(e){return t.showTimeForm()}}},[t._v("Time")]),s("el-button",{staticClass:"updateBtn",attrs:{type:"primary"},on:{click:function(e){return t.updateTask()}}},[t._v("Update")]),s("el-button",{staticClass:"backBtn",attrs:{type:"danger"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Back")])],1)],1)],1)],1),s("br"),s("br")],1)},n=[],c=(s("159b"),s("a434"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"checklistContainer"}},[t._l(t.checklist,(function(e){return s("div",{key:e.key},[s("el-form-item",[s("el-input",{staticClass:"check-input",attrs:{placeholder:"check"},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"check.value"}}),s("span",{staticClass:"remove-check",on:{click:function(s){return t.removeCheck(e)}}},[s("i",{staticClass:"el-icon-close"})])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"check.error"}]},[s("p",{staticClass:"checkError"},[t._v("Please enter a valid check")])])],1)})),s("br"),s("el-button",{staticClass:"addCheckBtn",attrs:{type:"primary"},on:{click:function(e){return t.checkChecklist()}}},[t._v("Add Check")])],2)}),l=[],m={name:"Checklist",props:{checklist:{type:Array,default:function(){return[{key:0,value:"",error:!1}]}},addCheck:{type:Boolean}},data:function(){return{loading:!1}},computed:{},watch:{},created:function(){},methods:{checkChecklist:function(){this.checklist.forEach((function(t){""===t.value?t.error=!0:t.error=!1})),this.checklist.some((function(t){return!0===t.error}))||this.checklist.push({key:Date.now(),value:"",error:!1})},removeCheck:function(t){var e=this.checklist.indexOf(t);this.checklist.splice(e,1)}}},d=m,u=(s("3305"),s("2877")),k=Object(u["a"])(d,c,l,!1,null,"60d2e811",null),h=k.exports,p={name:"UpdateTaskForm",components:{Checklist:h},props:{tags:{type:Array,default:function(){return["Work","Life"]}},taskForm:{type:Object,default:function(){return{}}}},data:function(){return{showDate:!1,showTime:!1,disableTimeBtn:!0,taskRules:{task:[{required:!0,trigger:"blur"}],tag_id:[{required:!0,trigger:["blur","change"]}],priority:[{required:!0,trigger:"blur"}],start_time:[{required:!0,trigger:["blur"]}],start_date_object:[{required:!0,trigger:["blur","change"]}]},defaultStartTime:"10:00",startTimePickerOptions:{start:"05:00",step:"00:15",end:"23:00",maxTime:""},endTimePickerOptions:{start:"05:00",step:"00:15",end:"23:00",minTime:""},startDatePickerOptions:{firstDayOfWeek:1},loadingTags:!0,addCheck:!1}},computed:{},watch:{taskForm:{handler:function(){console.log("everywhere"),this.showDate=this.taskForm.hasDate,this.showTime=this.taskForm.hasTime,this.disableTimeBtn=!this.taskForm.hasTime&&!this.taskForm.start_date_object},deep:!0,immediate:!0}},created:function(){},methods:{showDateForm:function(){!1===this.showDate?(this.taskForm.hasDate=!0,this.taskForm.start_date="",this.taskForm.start_date_object=""):!0===this.showDate&&(this.taskForm.hasDate=!1,this.taskForm.hasTime=!1,this.resetDateTime(!0,!0))},showTimeForm:function(){!1===this.showTime?this.taskForm.hasTime=!0:!0===this.showTime&&(this.taskForm.hasTime=!1,this.resetDateTime(!1,!0))},resetDateTime:function(t,e){t&&e?(this.taskForm.start_date_object="",this.taskForm.start_time="",this.taskForm.end_time="",this.updateEndTimeOptions("05:00"),this.updateStartTimeOptions("23:00")):!t&&e&&(this.taskForm.start_time="",this.taskForm.end_time="",this.updateEndTimeOptions("05:00"),this.updateStartTimeOptions("23:00"))},updateEndTimeOptions:function(t){this.endTimePickerOptions.start=t,this.endTimePickerOptions.minTime=this.taskForm.start_time,this.taskForm.start_time>this.taskForm.end_time&&(this.taskForm.end_time="")},updateStartTimeOptions:function(t){this.startTimePickerOptions.end=t,this.startTimePickerOptions.maxTime=this.taskForm.end_time,this.taskForm.end_time<this.taskForm.start_time&&(this.taskForm.start_time="")},updateTask:function(){var t=this;this.$refs.taskForm.validate((function(e){if(!e)return t.$message.error("Please Complete Form"),!1;t.loading=!0,t.taskForm.start_date_object&&(t.taskForm.start_date=t.taskForm.start_date_object.toLocaleDateString()),t.taskForm.checklist.forEach((function(e,s){""===e.value?t.taskForm.checklist.splice(s,1):void 0===e.completed&&(e.completed=!1)})),t.$emit("formComplete",t.taskForm),t.loading=!1}))}}},f=p,b=(s("54d8"),Object(u["a"])(f,o,n,!1,null,"484584bb",null)),g=b.exports,F={name:"UpdateTask",components:{UpdateTaskForm:g},data:function(){return{type:"update",taskID:"",taskForm:{},tags:[],loadingTags:!0}},computed:{},watch:{},created:function(){this.taskID=this.$route.query.taskID,this.getTask(),this.getTags()},methods:{getTask:function(){var t=this;Object(i["G"])(this.taskID,this.type).then((function(e){console.log(e),t.taskForm=e.data,t.taskForm.start_date_object=new Date(e.data.start_date),t.taskForm.checklist.push({key:0,value:"",error:!1})})).catch((function(e){t.$message.error("Error Getting Task"),console.log(e)}))},getTags:function(){var t=this;Object(i["F"])(this.type).then((function(e){t.tags=e.data,t.loadingTags=!1})).catch((function(e){t.loadingTags=!1,t.$message.error(e),console.log(e)}))},updateTask:function(t){var e=this;this.taskForm=t,Object(i["U"])(this.taskForm).then((function(t){e.$message.success("Task Updated Successfully"),e.$router.go(-1)})).catch((function(t){e.$message.error("Error Updating Task"),console.log(t.response)}))}}},_=F,T=(s("dc4d"),Object(u["a"])(_,a,r,!1,null,"cacb5ecc",null));e["default"]=T.exports},3305:function(t,e,s){"use strict";s("d56e")},"54d8":function(t,e,s){"use strict";s("e37f")},"6f4b":function(t,e,s){},d56e:function(t,e,s){},dc4d:function(t,e,s){"use strict";s("6f4b")},e37f:function(t,e,s){}}]);